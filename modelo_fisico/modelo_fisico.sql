-- MySQL Script generated by MySQL Workbench
-- sex 16 jun 2023 21:22:27
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema IFBOOKS
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema IFBOOKS
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `IFBOOKS` ;
USE `IFBOOKS` ;

-- -----------------------------------------------------
-- Table `IFBOOKS`.`USUARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`USUARIO` (
  `ID_USUARIO` INT NOT NULL AUTO_INCREMENT,
  `NOME_USUARIO` VARCHAR(50) NOT NULL,
  `DATA_NASCIMENTO` DATE NOT NULL,
  `DATA_FALECIMENTO` DATE NULL,
  `NOME_REAL_USUARIO` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`ID_USUARIO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`SEGUE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`SEGUE` (
  `ID_USUARIO_A` INT NOT NULL,
  `ID_USUARIO_B` INT NOT NULL,
  INDEX `fk_SEGUE_1_idx` (`ID_USUARIO_A` ASC) VISIBLE,
  INDEX `FK_USUARIO_ID_USUARIO__idx` (`ID_USUARIO_B` ASC) VISIBLE,
  CONSTRAINT `FK_USUARIO_ID_USUARIO`
    FOREIGN KEY (`ID_USUARIO_A`)
    REFERENCES `IFBOOKS`.`USUARIO` (`ID_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_USUARIO_ID_USUARIO_`
    FOREIGN KEY (`ID_USUARIO_B`)
    REFERENCES `IFBOOKS`.`USUARIO` (`ID_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`EH_SEGUIDO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`EH_SEGUIDO` (
  `ID_USUARIO_A` INT NOT NULL,
  `ID_USUARIO_B` INT NOT NULL,
  INDEX `fk_SEGUE_1_idx` (`ID_USUARIO_A` ASC) VISIBLE,
  INDEX `FK_USUARIO_ID_USUARIO__idx` (`ID_USUARIO_B` ASC) VISIBLE,
  CONSTRAINT `FK_USUARIO_ID_USUARIO0`
    FOREIGN KEY (`ID_USUARIO_A`)
    REFERENCES `IFBOOKS`.`USUARIO` (`ID_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_USUARIO_ID_USUARIO_0`
    FOREIGN KEY (`ID_USUARIO_B`)
    REFERENCES `IFBOOKS`.`USUARIO` (`ID_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`ENDERECO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`ENDERECO` (
  `ID_ENDERECO` INT NOT NULL AUTO_INCREMENT,
  `BAIRRO` VARCHAR(50) NULL,
  `CEP` VARCHAR(8) NULL,
  `LOGRADOURO` VARCHAR(50) NULL,
  `NUMERO` INT NULL,
  `COMPLEMENTO` VARCHAR(50) NULL,
  `RUA` VARCHAR(50) NULL,
  `ESTADO` VARCHAR(50) NULL,
  `PAIS` VARCHAR(50) NULL,
  `CIDADE` VARCHAR(50) NULL,
  `ID_USUARIO` INT NOT NULL,
  PRIMARY KEY (`ID_ENDERECO`),
  INDEX `FK_ID_USUARIO_idx` (`ID_USUARIO` ASC) VISIBLE,
  CONSTRAINT `FK_ID_USUARIO`
    FOREIGN KEY (`ID_USUARIO`)
    REFERENCES `IFBOOKS`.`USUARIO` (`ID_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`TELEFONE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`TELEFONE` (
  `ID_TELEFONE` INT NOT NULL,
  `TELEFONE` VARCHAR(11) NOT NULL,
  `ID_USUARIO` INT NOT NULL,
  PRIMARY KEY (`ID_TELEFONE`),
  INDEX `FK_INFORMACOES_PESSOAIS_idx` (`ID_USUARIO` ASC) VISIBLE,
  CONSTRAINT `FK_INFORMACOES_PESSOAIS`
    FOREIGN KEY (`ID_USUARIO`)
    REFERENCES `IFBOOKS`.`USUARIO` (`ID_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`LOGIN`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`LOGIN` (
  `ID_LOGIN` INT NOT NULL AUTO_INCREMENT,
  `ID_USUARIO` INT NOT NULL,
  `EMAIL` VARCHAR(50) NOT NULL,
  `SENHA` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`ID_LOGIN`),
  UNIQUE INDEX `EMAIL_UNIQUE` (`EMAIL` ASC) VISIBLE,
  INDEX `FK_ID_USUARIO_idx` (`ID_USUARIO` ASC) VISIBLE,
  CONSTRAINT `FK_ID_USUARIO`
    FOREIGN KEY (`ID_USUARIO`)
    REFERENCES `IFBOOKS`.`USUARIO` (`ID_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`LIVRO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`LIVRO` (
  `ID_LIVRO` INT NOT NULL AUTO_INCREMENT,
  `QUANTIDADE_PAGINA` INT NOT NULL,
  `DATA_LANCAMENTO` DATE NULL,
  `PROGRESSO` INT NULL,
  `DATA_INICIO` DATE NULL,
  `DATA_FIM` DATE NULL,
  `PRECO` DOUBLE NULL,
  `ISBN` CHAR(13) NOT NULL,
  `TITULO` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`ID_LIVRO`),
  UNIQUE INDEX `ISBN_UNIQUE` (`ISBN` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`PUBLICACOES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`PUBLICACOES` (
  `ID_PUBLICACAO` INT NOT NULL AUTO_INCREMENT,
  `ID_USUARIO` INT NOT NULL,
  `DATA` DATE NOT NULL,
  `SPOILER` TINYINT NULL,
  `ID_LIVRO` INT NOT NULL,
  `CURITDAS` INT NULL,
  PRIMARY KEY (`ID_PUBLICACAO`),
  INDEX `FK_ID_USUARIO_idx` (`ID_USUARIO` ASC) VISIBLE,
  INDEX `FK_ID_PUBLICACAO_LIVRO_idx` (`ID_LIVRO` ASC) VISIBLE,
  CONSTRAINT `FK_ID_USUARIO`
    FOREIGN KEY (`ID_USUARIO`)
    REFERENCES `IFBOOKS`.`USUARIO` (`ID_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_ID_PUBLICACAO_LIVRO`
    FOREIGN KEY (`ID_LIVRO`)
    REFERENCES `IFBOOKS`.`LIVRO` (`ID_LIVRO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`COMENTARIOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`COMENTARIOS` (
  `ID_COMENTARIOS` INT NOT NULL AUTO_INCREMENT,
  `ID_PUBLICACOES` INT NOT NULL,
  PRIMARY KEY (`ID_COMENTARIOS`),
  INDEX `FK_PUBLICACOES_idx` (`ID_PUBLICACOES` ASC) VISIBLE,
  CONSTRAINT `FK_PUBLICACOES`
    FOREIGN KEY (`ID_PUBLICACOES`)
    REFERENCES `IFBOOKS`.`PUBLICACOES` (`ID_PUBLICACAO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`BIBLIOTECA_PESSOAL`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`BIBLIOTECA_PESSOAL` (
  `ID_USUARIO` INT NOT NULL,
  `ID_LIVRO` INT NOT NULL,
  `COMPRADO_NA_LIVRARIA` TINYINT NOT NULL DEFAULT 0,
  INDEX `FK_ID_USUARIO_idx` (`ID_USUARIO` ASC) VISIBLE,
  INDEX `FK_ID_LIVRO_idx` (`ID_LIVRO` ASC) VISIBLE,
  CONSTRAINT `FK_ID_USUARIO`
    FOREIGN KEY (`ID_USUARIO`)
    REFERENCES `IFBOOKS`.`USUARIO` (`ID_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_ID_LIVRO`
    FOREIGN KEY (`ID_LIVRO`)
    REFERENCES `IFBOOKS`.`LIVRO` (`ID_LIVRO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE TABLE IF NOT EXISTS `IFBOOKS`.`BIBLIOTECA_PESSOAL` (
  `ID_USUARIO` INT NOT NULL,
  `ID_LIVRO` INT NOT NULL,
  `COMPRADO_NA_LIVRARIA` TINYINT NOT NULL DEFAULT 0,
  `DATA_INICIO` DATE NULL,
  `DATA_FIM` DATE NULL,
  `PROGRESSO` INT NULL,
) ENGINE = InnoDB ;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`AUTOR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`AUTOR` (
  `ID_AUTOR` INT NOT NULL AUTO_INCREMENT,
  `NOME` VARCHAR(50) NULL,
  `DATA_NASCIMENTO` DATE NULL,
  `DATA_FALESCIMENTO` DATE NULL,
  PRIMARY KEY (`ID_AUTOR`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`LIVRO_POSSUI_AUTOR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`LIVRO_POSSUI_AUTOR` (
  `FK_ID_LIVRO` INT NULL,
  `FK_ID_AUTOR` INT NULL,
  INDEX `FK_AUTOR_idx` (`FK_ID_AUTOR` ASC) VISIBLE,
  INDEX `FK_LIVRO_idx` (`FK_ID_LIVRO` ASC) VISIBLE,
  CONSTRAINT `FK_AUTOR`
    FOREIGN KEY (`FK_ID_AUTOR`)
    REFERENCES `IFBOOKS`.`AUTOR` (`ID_AUTOR`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_LIVRO`
    FOREIGN KEY (`FK_ID_LIVRO`)
    REFERENCES `IFBOOKS`.`LIVRO` (`ID_LIVRO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`AVALIACAO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`AVALIACAO` (
  `ID_AVALIACAO` INT NOT NULL AUTO_INCREMENT,
  `COMENTARIO_DA_AVALIACAO` TEXT NULL,
  `ESTRELINHAS` ENUM('1', '2', '3', '4', '5') NULL,
  `ID_LIVRO` INT NOT NULL,
  PRIMARY KEY (`ID_AVALIACAO`),
  INDEX `FK_ID_LIVRO_idx` (`ID_LIVRO` ASC) VISIBLE,
  CONSTRAINT `FK_ID_LIVRO`
    FOREIGN KEY (`ID_LIVRO`)
    REFERENCES `IFBOOKS`.`LIVRO` (`ID_LIVRO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`EDITORA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`EDITORA` (
  `ID_EDITORA` INT NOT NULL AUTO_INCREMENT,
  `RAZAO_SOCIAL` VARCHAR(75) NOT NULL,
  `CNPJ` CHAR(14) NOT NULL,
  PRIMARY KEY (`ID_EDITORA`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`LIVRO_POSSUI_EDITORA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`LIVRO_POSSUI_EDITORA` (
  `FK_ID_EDITORA` INT NOT NULL,
  `FK_ID_LIVRO` INT NOT NULL,
  INDEX `FK_EDITORA_idx` (`FK_ID_EDITORA` ASC) VISIBLE,
  INDEX `FK_LIVRO_idx` (`FK_ID_LIVRO` ASC) VISIBLE,
  CONSTRAINT `FK_EDITORA`
    FOREIGN KEY (`FK_ID_EDITORA`)
    REFERENCES `IFBOOKS`.`EDITORA` (`ID_EDITORA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_LIVRO`
    FOREIGN KEY (`FK_ID_LIVRO`)
    REFERENCES `IFBOOKS`.`LIVRO` (`ID_LIVRO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`GENERO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`GENERO` (
  `ID_GENERO` INT NOT NULL AUTO_INCREMENT,
  `NOME_GENERO` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`ID_GENERO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`LIVRO_POSSUI_GENERO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`LIVRO_POSSUI_GENERO` (
  `ID_LIVRO` INT NOT NULL,
  `ID_GENERO` INT NOT NULL,
  INDEX `FK_LIVRO_idx` (`ID_LIVRO` ASC) VISIBLE,
  INDEX `FK_GENERO_idx` (`ID_GENERO` ASC) VISIBLE,
  CONSTRAINT `FK_LIVRO`
    FOREIGN KEY (`ID_LIVRO`)
    REFERENCES `IFBOOKS`.`LIVRO` (`ID_LIVRO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_GENERO`
    FOREIGN KEY (`ID_GENERO`)
    REFERENCES `IFBOOKS`.`GENERO` (`ID_GENERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`MANDA_MENSAGEM_VIA_CHAT`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`MANDA_MENSAGEM_VIA_CHAT` (
  `ID_USUARIO_A` INT NOT NULL,
  `ID_USUARIO_B` INT NOT NULL,
  `TEXTO` TEXT NOT NULL,
  `DATA_ENVIO` TIMESTAMP NOT NULL,
  INDEX `FK_USUARIO_A_idx` (`ID_USUARIO_A` ASC) VISIBLE,
  INDEX `FK_USUARIO_B_idx` (`ID_USUARIO_B` ASC) VISIBLE,
  CONSTRAINT `FK_ID_USUARIO_A`
    FOREIGN KEY (`ID_USUARIO_A`)
    REFERENCES `IFBOOKS`.`USUARIO` (`ID_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_ID_USUARIO_B`
    FOREIGN KEY (`ID_USUARIO_B`)
    REFERENCES `IFBOOKS`.`USUARIO` (`ID_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`PEDIDOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`PEDIDOS` (
  `ID_PEDIDO` INT NOT NULL AUTO_INCREMENT,
  `VALOR_TOTAL` DOUBLE NOT NULL,
  `FORMA_PAGAMENTO` ENUM('CARTAO_DEBITO', 'CARTAO_CREDITO', 'PIX', 'BOLETO') NOT NULL,
  PRIMARY KEY (`ID_PEDIDO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`CARRINHO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`CARRINHO` (
  `ID_LIVRO` INT NULL,
  `QUANTIDADE` INT NULL,
  `ID_USUARIO` INT NOT NULL,
  `ID_PEDIDO` INT NULL,
  INDEX `id_livro_idx` (`ID_LIVRO` ASC) VISIBLE,
  PRIMARY KEY (`ID_USUARIO`),
  INDEX `FK_ID_PEDIDO_CARRINHO_idx` (`ID_PEDIDO` ASC) VISIBLE,
  CONSTRAINT `FK_ID_LIVRO`
    FOREIGN KEY (`ID_LIVRO`)
    REFERENCES `IFBOOKS`.`LIVRO` (`ID_LIVRO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_ID_USUARIO`
    FOREIGN KEY (`ID_USUARIO`)
    REFERENCES `IFBOOKS`.`USUARIO` (`ID_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_ID_PEDIDO_CARRINHO`
    FOREIGN KEY (`ID_PEDIDO`)
    REFERENCES `IFBOOKS`.`PEDIDOS` (`ID_PEDIDO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IFBOOKS`.`PEDIDO_APROVADO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IFBOOKS`.`PEDIDO_APROVADO` (
  `ID_PEDIDO` INT NULL,
  `ID_BIBLIOTECA_PESSOAL` INT NULL,
  INDEX `FK_BIBLIOTECA_idx` (`ID_BIBLIOTECA_PESSOAL` ASC) VISIBLE,
  INDEX `FK_PEDIDO_idx` (`ID_PEDIDO` ASC) VISIBLE,
  CONSTRAINT `FK_BIBLIOTECA`
    FOREIGN KEY (`ID_BIBLIOTECA_PESSOAL`)
    REFERENCES `IFBOOKS`.`BIBLIOTECA_PESSOAL` (`ID_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_PEDIDO`
    FOREIGN KEY (`ID_PEDIDO`)
    REFERENCES `IFBOOKS`.`PEDIDOS` (`ID_PEDIDO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
